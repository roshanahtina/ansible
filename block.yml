---
- hosts: ansi_1
  remote_user: ec2-user
  become: yes
  become_method: sudo
  gather_facts: fales
  
  tasks:
  - name: get file
    block:
      - get_url: http://172.31.34.177/index.html
        dest: "/tmp/index_file"
    rescue:
      - debug: msg="The file is doesn't exist"
    always:
      - debug: msg="This is done...!"
        
  - name: Handle the error
    block:
      - debug:
          msg: 'I execute normally'
      - name: i force a failure
          command: /bin/false
      - debug:
          msg: 'I never execute, due to the above task failing, :-('
    rescue:
      - debug:
          msg: 'I caught an error, can do stuff here to fix it, :-)'
